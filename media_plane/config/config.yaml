# Media Plane 配置文件

server:
  # WebSocket Signaling 端口
  signaling_port: 8888
  host: "0.0.0.0"
  max_connections: 10
  
  # JWT 认证配置
  # jwt_secret 建议通过环境变量 JWT_SECRET 设置
  jwt_secret: ""
  # 是否要求认证（开发模式可关闭）
  require_auth: false

video:
  # 默认视频源
  default_source: "head_camera"
  
  # 视频源配置
  # type 类型说明:
  #   - ros2: 从 ROS2 话题订阅图像 (Orbbec/RealSense等)
  #   - v4l2: 直接访问 V4L2 设备
  #   - nvargus: Jetson CSI 摄像头
  #   - test: 测试图案源
  sources:
    # Orbbec Gemini 330 头部摄像头
    - name: "head_camera"
      type: "ros2"
      topic: "/head_camera/color/image_raw"
      enabled: true
    
    # Orbbec Gemini 330 左手摄像头
    - name: "left_camera"
      type: "ros2"
      topic: "/left_camera/color/image_raw"
      enabled: true
    
    # Orbbec Gemini 330 右手摄像头
    - name: "right_camera"
      type: "ros2"
      topic: "/right_camera/color/image_raw"
      enabled: true
    
    # 测试视频源（开发调试用）
    - name: "test_pattern"
      type: "test"
      device: ""
      enabled: true

  # 编码参数
  encoding:
    # 编解码器: h264, h265, vp8, vp9
    codec: "h264"
    # 使用硬件编码 (Jetson NVENC)
    hardware_encoder: true
    # 分辨率
    width: 1280
    height: 720
    # 帧率
    framerate: 30
    # 码率 (kbps)
    bitrate: 2000
    # 关键帧间隔
    keyframe_interval: 30

webrtc:
  # STUN 服务器
  stun_servers:
    - "stun:stun.l.google.com:19302"
  
  # TURN 服务器（可选，内网不需要）
  turn_servers: []
  
  # ICE 传输策略: all, relay
  ice_transport_policy: "all"

# Jetson 硬件加速配置
jetson:
  # 使用 NVENC 编码
  use_nvenc: true
  # NVENC 预设: ultrafast, fast, medium, slow
  nvenc_preset: "fast"
  # 使用 NVDEC 解码（如果需要接收视频）
  use_nvdec: false

# ROS2 配置
ros2:
  # 是否启用 ROS2 支持
  enabled: true
  # ROS_DOMAIN_ID（如果不同于系统默认）
  domain_id: -1  # -1 表示使用环境变量
  # 话题发现间隔（秒）
  discovery_interval: 5

logging:
  level: "INFO"
  file: ""
  journald: true
